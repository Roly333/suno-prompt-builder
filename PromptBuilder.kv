# promptbuilder.kv
#:kivy 2.1.0
#:import dp kivy.metrics.dp

<TitledCheckBox@BoxLayout>:
    size_hint_y: None
    height: dp(48)
    title: ''
    CheckBox:
        id: checkbox
        size_hint_x: None
        width: dp(48)
    Label:
        text: root.title
        font_size: '20sp'
        bold: True

<MainLayout>:
    orientation: 'vertical'
    spacing: dp(10)
    padding: dp(10)

    ScrollView:
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: dp(15)

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: dp(500)
                spacing: dp(5)
                Label:
                    text: 'Track Attributes'
                    font_size: '20sp'
                    bold: True
                    size_hint_y: None
                    height: dp(40)
                GridLayout:
                    cols: 2
                    spacing: dp(5)
                    # MODIFICATION: Increased font size for all attribute labels
                    Label:
                        text: 'Genre'
                        font_size: '16sp'
                    Spinner:
                        id: genre_spinner
                        values: app.genre_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Sub Genre'
                        font_size: '16sp'
                    Spinner:
                        id: sub_genre_spinner
                        values: app.sub_genre_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Bass Type'
                        font_size: '16sp'
                    Spinner:
                        id: bass_type_spinner
                        values: app.bass_type_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Sub Type'
                        font_size: '16sp'
                    Spinner:
                        id: sub_type_spinner
                        values: app.sub_type_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Drum Type'
                        font_size: '16sp'
                    Spinner:
                        id: drum_type_spinner
                        values: app.drum_type_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Break Type'
                        font_size: '16sp'
                    Spinner:
                        id: break_type_spinner
                        values: app.break_type_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Atmosphere 1'
                        font_size: '16sp'
                    Spinner:
                        id: atmos1_spinner
                        values: app.atmosphere_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Atmosphere 2'
                        font_size: '16sp'
                    Spinner:
                        id: atmos2_spinner
                        values: app.atmosphere_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Mood 1'
                        font_size: '16sp'
                    Spinner:
                        id: mood1_spinner
                        values: app.mood_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Mood 2'
                        font_size: '16sp'
                    Spinner:
                        id: mood2_spinner
                        values: app.mood_options
                        on_text: root.update_prompt()
                    Label:
                        text: 'Tempo'
                        font_size: '16sp'
                    TextInput:
                        id: tempo_input
                        text: '170'
                        multiline: False
                        on_text: root.update_prompt()

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                TitledCheckBox:
                    id: influences_toggle
                    title: 'Add Influences'
                GridLayout:
                    id: influences_grid
                    cols: 2
                    size_hint_y: None
                    height: self.minimum_height if root.ids.influences_toggle.ids.checkbox.active else 0
                    opacity: 1 if root.ids.influences_toggle.ids.checkbox.active else 0

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                BoxLayout:
                    size_hint_y: None
                    height: dp(48)
                    TitledCheckBox:
                        id: vocalists_toggle
                        title: 'Enable Vocalists'
                    Button:
                        text: 'Add Vocalist'
                        size_hint_x: 0.4
                        disabled: not root.ids.vocalists_toggle.ids.checkbox.active
                        on_release: root.add_vocalist()
                GridLayout:
                    id: vocalists_container
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height if root.ids.vocalists_toggle.ids.checkbox.active else 0
                    opacity: 1 if root.ids.vocalists_toggle.ids.checkbox.active else 0
                    spacing: dp(10)

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                TitledCheckBox:
                    id: structure_toggle
                    title: 'Enable Song Structure'
                BoxLayout:
                    size_hint_y: None
                    height: dp(400) if root.ids.structure_toggle.ids.checkbox.active else 0
                    opacity: 1 if root.ids.structure_toggle.ids.checkbox.active else 0
                    BoxLayout:
                        orientation: 'vertical'
                        Label:
                            text: 'Available'
                            font_size: '16sp'
                            size_hint_y: None
                            height: dp(30)
                        ScrollView:
                            GridLayout:
                                id: available_structure_list
                                cols: 1
                                size_hint_y: None
                                height: self.minimum_height
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.3
                        spacing: dp(5)
                        padding: (dp(5), dp(40))
                        Button:
                            text: 'Up'
                            on_release: root.move_structure_item('up')
                        Button:
                            text: 'Down'
                            on_release: root.move_structure_item('down')
                    BoxLayout:
                        orientation: 'vertical'
                        Label:
                            text: 'Your Structure'
                            font_size: '16sp'
                            size_hint_y: None
                            height: dp(30)
                        ScrollView:
                            GridLayout:
                                id: user_structure_list
                                cols: 1
                                size_hint_y: None
                                height: self.minimum_height

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                TitledCheckBox:
                    id: enhancements_toggle
                    title: 'Add Enhancements'
                    CheckBox:
                        id: checkbox
                        active: True
                GridLayout:
                    id: enhancements_grid
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height if root.ids.enhancements_toggle.ids.checkbox.active else 0
                    opacity: 1 if root.ids.enhancements_toggle.ids.checkbox.active else 0

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 0.3
        TextInput:
            id: prompt_output
            text: root.prompt_output
            readonly: True
            font_name: 'RobotoMono-Regular'
            font_size: '14sp'
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            Button:
                text: 'Copy'
                font_size: '16sp'
                on_release: root.copy_to_clipboard()
            Button:
                text: 'Save'
                font_size: '16sp'
                on_release: root.save_to_file()